{% extends "templates/baseform.jinja2" %}

{% block form_generic_description %}
   {% trans %}<p>These list contain all your emails registered in the
   platform. You can change your preferred email by clicking in the radio
   buttons.</p>
   <p>Remember, if you select a not verified email as your primary
   email, your level of assurance must be decreased.</p>
   {% endtrans %}
{% endblock %}

{% block extra_content %}

  {{ actions_url('emails-actions'|route_url) }}

  <table class='table table-striped table-thin emails'>
    <thead>
      <tr>
        <th>{{_("preferred")}}</th>
        <th>{{_("email")}}</th>
        <th>{{_("verification status")}}</th>
        <th>{{_("remove")}}</th>
      </tr>
    </thead>

    {% for mail in mails %}
    <tr class='emailrow' data-identifier="{{ loop.index0 }}">
        <td>
          <input type='radio' name='setprimary' value='{{loop.index0}}'
           title='{{_("Set this email as your primary email")}}'
           {% if mail.email == primary_email %}checked{% endif %}/></td>

        <td class='identifier'>{{ mail.email }}</td>

      {% if mail.verified %}
        <td><i class="icon-ok"
               title='{{_("Already verified")}}'></i></td>
      {% else %}
        <td>
          <label>
            <i class='icon-refresh' title='{{_("Resend verification email")}}'></i>
            <input class='hide' type='radio' name='verify' value='{{loop.index0}}'>
          </label>
        </td>
      {% endif %}

        <td>
          <label>
            <i class='icon-remove' title='{{_("Remove this email")}}'></i>
            <input class='hide' type='radio' name='remove' value='{{loop.index0}}'>
          </label>
        </td>
    </tr>
    {% endfor %}
  </table>

  <button type='button'
          class='btn add-new' 
          data-toggle='button'>
        <i class='icon-plus'></i>
        {{_('Add a new email')}}</button>
{% endblock %}


{% block form_generic_form %}
  <div class='form-content hide'>
    {{ form|safe }}
  </div>
{% endblock %}
