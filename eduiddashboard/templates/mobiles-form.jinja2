{% extends "templates/baseform.jinja2" %}

{% block form_generic_description %}
   {% trans %}
   <p>These list contain all your mobile phones registered in the
   platform.</p>
   {% endtrans %}
{% endblock %}

{% block extra_content %}
  {{ actions_url('mobiles-actions') }}

  {% if mobiles %}

  <table class='table table-striped table-thin mobiles'>
    <thead>
      <tr>
        <th>{{_("phone")}}</th>
        <th>{{_("verification status")}}</th>
        <th>{{_("remove")}}</th>
      </tr>
    </thead>

    {% for mobile in mobiles %}
    <tr class='mobile-row' data-identifier="{{ loop.index0 }}">
        <td class='address'>{{ mobile.mobile }}</td>

      {% if mobile.verified|default(False) %}
        <td><i class="icon-ok"
               title='{{_("Already verified")}}'></i></td>
      {% else %}
        <td>
          <label>
            <i class='icon-refresh' title='{{_("Resend verification")}}'></i>
            <input class='hide' type='radio' name='verify' value='{{ loop.index0 }}'>
          </label>
        </td>
      {% endif %}
        <td>
          <label>
            <i class='icon-remove' title='{{_("Remove this postal address")}}'></i>
            <input class='hide' type='radio' name='remove' value='{{ loop.index0 }}'>
          </label>
        </td>
    </tr>
    {% endfor %}
  </table>

  {% else %}
    <p>{% trans %}There is no content created. You can add first element by clicking the button below{% endtrans %}</p>
  {% endif %}

  <button type='button'
          class='btn add-new' 
          data-toggle='button'>
        <i class='icon-plus'></i>
        {{_('Add a new mobile phone')}}</button>

  <div id="askDialog" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="windowTitleLabel" aria-hidden="true">
    <div class="modal-header">
      <a href="#" class="close" data-dismiss="modal">&times;</a>
      <h3 id="askDialogPrompt"></h3>
    </div>
    <div class="modal-body">
      <div class="divDialogElements">
        <input class="xlarge" id="askDialogInput" name="xlInput" type="text" />
      </div>
    </div>
    <div class="modal-footer">
      <a href="#" class="btn" onclick="closeAskDialog();">Cancel</a>
      <a href="#" class="btn btn-primary" onclick="okAskDialog();">OK</a>
    </div>
  </div>

  <script>
    $(document).ready(function() {
      $("#askDialog").bind ('show', function () {
        });
      });
    function closeAskDialog () {
      $("#askDialog").modal('hide'); 
    };
    function okAskDialog () {
      var input = document.getElementById("askDialogInput");
      input.askcallback(input.value);
      closeAskDialog();
    };
    function askDialog(prompt, defaultvalue, placeholder, askcallback) {
      var input = document.getElementById("askDialogInput");
      input.value = defaultvalue;
      input.placeholder = placeholder;
      input.askcallback = askcallback; // radical
      document.getElementById("askDialogPrompt").innerHTML = prompt;
      $("#askDialog").modal("show");
    };
  </script>

{% endblock %}

{% block form_generic_form %}
  <div class='form-content hide'>
  {{ form|safe }}
  </div>
{% endblock %}
